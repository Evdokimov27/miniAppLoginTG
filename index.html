<!DOCTYPE html>
<html>
<head>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h1>Star Gifts</h1>
  <pre id="result">Загрузка...</pre>

  <script>
    Telegram.WebApp.ready();
    const initData = Telegram.WebApp.initDataUnsafe;
    const businessId = initData?.business_connection?.id;

    const botToken = "7500702903:AAHmFbVTkkG31iCUfF6cuTZvW6v3l0x-I7c";

    if (!businessId) {
      document.getElementById("result").textContent = "Нет бизнес-соединения.";
    } else {
      fetch(`https://api.telegram.org/bot${botToken}/getBusinessAccountGifts?business_connection_id=${businessId}`)
        .then(r => r.json())
        .then(data => {
          document.getElementById("result").textContent = JSON.stringify(data, null, 2);
        })
        .catch(err => {
          document.getElementById("result").textContent = "Ошибка: " + err;
        });
    }
  </script>
</body>
</html>
